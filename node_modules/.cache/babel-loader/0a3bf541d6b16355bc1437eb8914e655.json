{"ast":null,"code":"var _jsxFileName = \"/Users/deol/My Code/ashmeetWedding/src/Components/aws_images/RenImages.js\";\nimport React, { Component } from 'react';\nimport { AWS } from 'aws-sdk'; // Load the AWS SDK for Node.js\n// Set the region \n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nAWS.config.loadFromPath('./config.json'); // Create S3 service object\n\nlet bucketName = \"ashmeet-wedding\"; // Create the parameters for calling listObjects\n\nvar bucketParams = {\n  Bucket: 'ashmeet-wedding'\n};\nlet keys = [];\n\nclass RenImages extends Component {\n  constructor() {\n    super(...arguments);\n    this.s3 = new AWS.S3({\n      apiVersion: '2006-03-01'\n    });\n    this.urls = getUrls();\n  }\n\n  async listAllKeys(opts) {\n    opts = { ...opts\n    };\n\n    do {\n      const data = await s3.listObjectsV2(opts).promise();\n      opts.ContinuationToken = data.NextContinuationToken;\n    } while (opts.ContinuationToken);\n  }\n\n  async getUrls() {\n    // using for of await loop\n    let keys = [];\n\n    for await (const data of listAllKeys(bucketParams)) {\n      for (let i = 0; i < data.Contents.length; i++) {\n        var key = data.Contents[i].Key;\n        let params = {\n          Bucket: bucketName,\n          Key: key\n        };\n        s3.getSignedUrl('getObject', params, function (err, url) {\n          console.log(url);\n          keys.push(url);\n        });\n      }\n    }\n\n    return keys;\n  }\n\n  renderHtml(url) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"imgbox\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: url\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 4\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"flex space-x-10\",\n      children: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: \"urls.map(renderHtml);\"\n      }, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport default RenImages;","map":{"version":3,"sources":["/Users/deol/My Code/ashmeetWedding/src/Components/aws_images/RenImages.js"],"names":["React","Component","AWS","config","loadFromPath","bucketName","bucketParams","Bucket","keys","RenImages","s3","S3","apiVersion","urls","getUrls","listAllKeys","opts","data","listObjectsV2","promise","ContinuationToken","NextContinuationToken","i","Contents","length","key","Key","params","getSignedUrl","err","url","console","log","push","renderHtml","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,GAAT,QAAoB,SAApB,C,CACA;AAEA;;;;AACAA,GAAG,CAACC,MAAJ,CAAWC,YAAX,CAAwB,eAAxB,E,CAEA;;AAGA,IAAIC,UAAU,GAAG,iBAAjB,C,CACA;;AACA,IAAIC,YAAY,GAAG;AACjBC,EAAAA,MAAM,EAAG;AADQ,CAAnB;AAGA,IAAIC,IAAI,GAAG,EAAX;;AAIA,MAAMC,SAAN,SAAwBR,SAAxB,CAAiC;AAAA;AAAA;AAAA,SAChCS,EADgC,GAC3B,IAAIR,GAAG,CAACS,EAAR,CAAW;AAACC,MAAAA,UAAU,EAAE;AAAb,KAAX,CAD2B;AAAA,SAuChCC,IAvCgC,GAuCzBC,OAAO,EAvCkB;AAAA;;AAGd,QAAXC,WAAW,CAACC,IAAD,EAAO;AACzBA,IAAAA,IAAI,GAAG,EAAE,GAAGA;AAAL,KAAP;;AACA,OAAG;AACF,YAAMC,IAAI,GAAG,MAAMP,EAAE,CAACQ,aAAH,CAAiBF,IAAjB,EAAuBG,OAAvB,EAAnB;AACAH,MAAAA,IAAI,CAACI,iBAAL,GAAyBH,IAAI,CAACI,qBAA9B;AACA,KAHD,QAGSL,IAAI,CAACI,iBAHd;AAIC;;AAGa,QAAPN,OAAO,GAAG;AACjB;AACA,QAAIN,IAAI,GAAE,EAAV;;AACA,eAAW,MAAMS,IAAjB,IAAyBF,WAAW,CAACT,YAAD,CAApC,EAAoD;AAEnD,WAAK,IAAIgB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,IAAI,CAACM,QAAL,CAAcC,MAAlC,EAA0CF,CAAC,EAA3C,EAA+C;AAC/C,YAAIG,GAAG,GAAIR,IAAI,CAACM,QAAL,CAAcD,CAAd,EAAiBI,GAA5B;AACA,YAAIC,MAAM,GAAG;AAAEpB,UAAAA,MAAM,EAAEF,UAAV;AAAsBqB,UAAAA,GAAG,EAAED;AAA3B,SAAb;AACAf,QAAAA,EAAE,CAACkB,YAAH,CAAgB,WAAhB,EAA6BD,MAA7B,EAAqC,UAAUE,GAAV,EAAeC,GAAf,EAAoB;AACxDC,UAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAtB,UAAAA,IAAI,CAACyB,IAAL,CAAUH,GAAV;AACA,SAHD;AAKC;AAED;;AACD,WAAOtB,IAAP;AACC;;AAED0B,EAAAA,UAAU,CAACJ,GAAD,EAAM;AACf,wBACC;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA,6BACC;AAAK,QAAA,GAAG,EAAIA;AAAZ;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,YADD;AAKA;;AAIDK,EAAAA,MAAM,GAAG;AACR,wBACC;AAAK,MAAA,KAAK,EAAG,iBAAb;AAAA,6BACC;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,YADD;AAOA;;AAjD+B;;AAuDjC,eAAe1B,SAAf","sourcesContent":["import React, { Component } from 'react'\nimport { AWS } from 'aws-sdk';\n// Load the AWS SDK for Node.js\n\n// Set the region \nAWS.config.loadFromPath('./config.json');\n\n// Create S3 service object\n\n\nlet bucketName = \"ashmeet-wedding\";\n// Create the parameters for calling listObjects\nvar bucketParams = {\n  Bucket : 'ashmeet-wedding',\n};\nlet keys = [];\n\n\n\nclass RenImages extends Component{\n\ts3 = new AWS.S3({apiVersion: '2006-03-01'});\n\n\tasync  listAllKeys(opts) {\n\topts = { ...opts };\n\tdo {\n\t\tconst data = await s3.listObjectsV2(opts).promise();\n\t\topts.ContinuationToken = data.NextContinuationToken;\n\t} while (opts.ContinuationToken);\n\t}\n\n\n\tasync  getUrls() {\n\t// using for of await loop\n\tlet keys= [];\n\tfor await (const data of listAllKeys(bucketParams)) {\n\n\t\tfor (let i = 0; i < data.Contents.length; i++) {\n\t\tvar key = (data.Contents[i].Key);\n\t\tlet params = { Bucket: bucketName, Key: key };\n\t\ts3.getSignedUrl('getObject', params, function (err, url) {\n\t\t\tconsole.log(url);\n\t\t\tkeys.push(url);\n\t\t});\n\t\t\n\t\t}\n\t\t\n\t}\n\treturn keys;\n\t}\n\n\trenderHtml(url) {\n\t\treturn (\n\t\t\t<div className=\"imgbox\">\n\t\t\t\t<img src = {url}/>\n\t\t\t</div>\n\t\t)\n\t}\n\n\turls = getUrls();\n\n\trender() {\n\t\treturn (\n\t\t\t<div class = \"flex space-x-10\">\n\t\t\t\t<>\n\t\t\t\turls.map(renderHtml);\n\t\t\t\t</>\n\t\t\t</div>\n\t\t)\n\t}\n\t\n\n\t\n}\n\nexport default RenImages"]},"metadata":{},"sourceType":"module"}