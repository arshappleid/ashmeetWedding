{"ast":null,"code":"var _jsxFileName = \"/Users/deol/My Code/ashmeetWedding/src/Components/aws_images/RenImages.js\";\nimport React, { Component } from 'react';\nimport { AWS } from 'aws-sdk'; // Load the AWS SDK for Node.js\n// Set the region \n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nAWS.config.loadFromPath('./config.json'); // Create S3 service object\n\nlet s3 = new AWS.S3({\n  apiVersion: '2006-03-01'\n});\nlet bucketName = \"ashmeet-wedding\"; // Create the parameters for calling listObjects\n\nvar bucketParams = {\n  Bucket: 'ashmeet-wedding'\n};\nlet keys = [];\n\nclass RenImages extends Component {\n  constructor() {\n    super(...arguments);\n    this.urls = getUrls();\n  }\n\n  listAllKeys(opts) {\n    opts = { ...opts\n    };\n\n    do {\n      const data = s3.listObjectsV2(opts).promise();\n      opts.ContinuationToken = data.NextContinuationToken;\n      return data;\n    } while (opts.ContinuationToken);\n  }\n\n  getUrls() {\n    // using for of await loop\n    let keys = [];\n\n    for (const data of listAllKeys(bucketParams)) {\n      for (let i = 0; i < data.Contents.length; i++) {\n        var key = data.Contents[i].Key;\n        let params = {\n          Bucket: bucketName,\n          Key: key\n        };\n        s3.getSignedUrl('getObject', params, function (err, url) {\n          console.log(url);\n          keys.push(url);\n        });\n      }\n    }\n\n    return keys;\n  }\n\n  renderHtml(url) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"imgbox\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: url\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 4\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"flex space-x-10\",\n      children: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: \"urls.map(renderHtml);\"\n      }, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport default RenImages;","map":{"version":3,"sources":["/Users/deol/My Code/ashmeetWedding/src/Components/aws_images/RenImages.js"],"names":["React","Component","AWS","config","loadFromPath","s3","S3","apiVersion","bucketName","bucketParams","Bucket","keys","RenImages","urls","getUrls","listAllKeys","opts","data","listObjectsV2","promise","ContinuationToken","NextContinuationToken","i","Contents","length","key","Key","params","getSignedUrl","err","url","console","log","push","renderHtml","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,GAAT,QAAoB,SAApB,C,CACA;AAEA;;;;AACAA,GAAG,CAACC,MAAJ,CAAWC,YAAX,CAAwB,eAAxB,E,CAEA;;AACA,IAAIC,EAAE,GAAG,IAAIH,GAAG,CAACI,EAAR,CAAW;AAACC,EAAAA,UAAU,EAAE;AAAb,CAAX,CAAT;AAEA,IAAIC,UAAU,GAAG,iBAAjB,C,CACA;;AACA,IAAIC,YAAY,GAAG;AACjBC,EAAAA,MAAM,EAAG;AADQ,CAAnB;AAGA,IAAIC,IAAI,GAAG,EAAX;;AAIA,MAAMC,SAAN,SAAwBX,SAAxB,CAAiC;AAAA;AAAA;AAAA,SAwChCY,IAxCgC,GAwCzBC,OAAO,EAxCkB;AAAA;;AAEhCC,EAAAA,WAAW,CAACC,IAAD,EAAO;AAClBA,IAAAA,IAAI,GAAG,EAAE,GAAGA;AAAL,KAAP;;AACA,OAAG;AACF,YAAMC,IAAI,GAAGZ,EAAE,CAACa,aAAH,CAAiBF,IAAjB,EAAuBG,OAAvB,EAAb;AACAH,MAAAA,IAAI,CAACI,iBAAL,GAAyBH,IAAI,CAACI,qBAA9B;AACA,aAAOJ,IAAP;AACA,KAJD,QAISD,IAAI,CAACI,iBAJd;AAMC;;AAGDN,EAAAA,OAAO,GAAG;AACV;AACA,QAAIH,IAAI,GAAE,EAAV;;AACA,SAAM,MAAMM,IAAZ,IAAoBF,WAAW,CAACN,YAAD,CAA/B,EAA+C;AAE9C,WAAK,IAAIa,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,IAAI,CAACM,QAAL,CAAcC,MAAlC,EAA0CF,CAAC,EAA3C,EAA+C;AAC/C,YAAIG,GAAG,GAAIR,IAAI,CAACM,QAAL,CAAcD,CAAd,EAAiBI,GAA5B;AACA,YAAIC,MAAM,GAAG;AAAEjB,UAAAA,MAAM,EAAEF,UAAV;AAAsBkB,UAAAA,GAAG,EAAED;AAA3B,SAAb;AACApB,QAAAA,EAAE,CAACuB,YAAH,CAAgB,WAAhB,EAA6BD,MAA7B,EAAqC,UAAUE,GAAV,EAAeC,GAAf,EAAoB;AACxDC,UAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAnB,UAAAA,IAAI,CAACsB,IAAL,CAAUH,GAAV;AACA,SAHD;AAKC;AAED;;AACD,WAAOnB,IAAP;AACC;;AAEDuB,EAAAA,UAAU,CAACJ,GAAD,EAAM;AACf,wBACC;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA,6BACC;AAAK,QAAA,GAAG,EAAIA;AAAZ;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,YADD;AAKA;;AAIDK,EAAAA,MAAM,GAAG;AACR,wBACC;AAAK,MAAA,KAAK,EAAG,iBAAb;AAAA,6BACC;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,YADD;AAOA;;AAlD+B;;AAwDjC,eAAevB,SAAf","sourcesContent":["import React, { Component } from 'react'\nimport { AWS } from 'aws-sdk';\n// Load the AWS SDK for Node.js\n\n// Set the region \nAWS.config.loadFromPath('./config.json');\n\n// Create S3 service object\nlet s3 = new AWS.S3({apiVersion: '2006-03-01'});\n\nlet bucketName = \"ashmeet-wedding\";\n// Create the parameters for calling listObjects\nvar bucketParams = {\n  Bucket : 'ashmeet-wedding',\n};\nlet keys = [];\n\n\n\nclass RenImages extends Component{\n\n\tlistAllKeys(opts) {\n\topts = { ...opts };\n\tdo {\n\t\tconst data = s3.listObjectsV2(opts).promise();\n\t\topts.ContinuationToken = data.NextContinuationToken;\n\t\treturn data;\n\t} while (opts.ContinuationToken);\n\t\t\n\t}\n\n\n\tgetUrls() {\n\t// using for of await loop\n\tlet keys= [];\n\tfor  (const data of listAllKeys(bucketParams)) {\n\n\t\tfor (let i = 0; i < data.Contents.length; i++) {\n\t\tvar key = (data.Contents[i].Key);\n\t\tlet params = { Bucket: bucketName, Key: key };\n\t\ts3.getSignedUrl('getObject', params, function (err, url) {\n\t\t\tconsole.log(url);\n\t\t\tkeys.push(url);\n\t\t});\n\t\t\n\t\t}\n\t\t\n\t}\n\treturn keys;\n\t}\n\n\trenderHtml(url) {\n\t\treturn (\n\t\t\t<div className=\"imgbox\">\n\t\t\t\t<img src = {url}/>\n\t\t\t</div>\n\t\t)\n\t}\n\n\turls = getUrls();\n\n\trender() {\n\t\treturn (\n\t\t\t<div class = \"flex space-x-10\">\n\t\t\t\t<>\n\t\t\t\turls.map(renderHtml);\n\t\t\t\t</>\n\t\t\t</div>\n\t\t)\n\t}\n\t\n\n\t\n}\n\nexport default RenImages"]},"metadata":{},"sourceType":"module"}