{"ast":null,"code":"const {\n  S3\n} = require(\"aws-sdk\");\n\nconst login_details = require(\"./awslogin.json\");\n\nvar s3 = new S3(login_details); // Prefic =\"folderName\" for params\n\nvar params = {\n  Bucket: 'ashmeet-wedding',\n  Key: 'img1.jpg'\n};\nvar param1 = {\n  Bucket: 'ashmeet-wedding',\n  ContentType: 'image/jpeg'\n};\n\nasync function* listAllKeys(opts) {\n  opts = { ...opts\n  };\n\n  do {\n    const data = await s3.listObjectsV2(opts).promise();\n    opts.ContinuationToken = data.NextContinuationToken;\n    yield data;\n  } while (opts.ContinuationToken);\n}\n\nlistAllKeys(param1);\n\nasync function main() {\n  // using for of await loop\n  let keys = [];\n\n  for await (const data of listAllKeys(params)) {\n    for (let i = 0; i < data.Contents.length; i++) {\n      keys.push(data.Contents[i].Key);\n    }\n  }\n\n  console.log(keys);\n}\n\nmain();\n\ntry {\n  const url = s3.getSignedUrl('GetObject', params);\n  console.log(\"Url : \", url);\n} catch (err) {\n  console.log(\"Error : \", err);\n}","map":{"version":3,"sources":["/Users/deol/My Code/ashmeetWedding/src/Components/aws_images/import.js"],"names":["S3","require","login_details","s3","params","Bucket","Key","param1","ContentType","listAllKeys","opts","data","listObjectsV2","promise","ContinuationToken","NextContinuationToken","main","keys","i","Contents","length","push","console","log","url","getSignedUrl","err"],"mappings":"AAAA,MAAM;AAAEA,EAAAA;AAAF,IAASC,OAAO,CAAC,SAAD,CAAtB;;AACA,MAAMC,aAAa,GAAGD,OAAO,CAAC,iBAAD,CAA7B;;AAEA,IAAIE,EAAE,GAAG,IAAIH,EAAJ,CAAOE,aAAP,CAAT,C,CACA;;AACA,IAAIE,MAAM,GAAG;AACXC,EAAAA,MAAM,EAAE,iBADG;AAEXC,EAAAA,GAAG,EAAE;AAFM,CAAb;AAIA,IAAIC,MAAM,GAAG;AACXF,EAAAA,MAAM,EAAE,iBADG;AACeG,EAAAA,WAAW,EAAE;AAD5B,CAAb;;AAIA,gBAAgBC,WAAhB,CAA4BC,IAA5B,EAAkC;AAChCA,EAAAA,IAAI,GAAG,EAAE,GAAGA;AAAL,GAAP;;AACA,KAAG;AACD,UAAMC,IAAI,GAAG,MAAMR,EAAE,CAACS,aAAH,CAAiBF,IAAjB,EAAuBG,OAAvB,EAAnB;AACAH,IAAAA,IAAI,CAACI,iBAAL,GAAyBH,IAAI,CAACI,qBAA9B;AACA,UAAMJ,IAAN;AACD,GAJD,QAISD,IAAI,CAACI,iBAJd;AAKD;;AAEDL,WAAW,CAACF,MAAD,CAAX;;AAEA,eAAeS,IAAf,GAAsB;AACpB;AACA,MAAIC,IAAI,GAAG,EAAX;;AACA,aAAW,MAAMN,IAAjB,IAAyBF,WAAW,CAACL,MAAD,CAApC,EAA8C;AAC5C,SAAK,IAAIc,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,IAAI,CAACQ,QAAL,CAAcC,MAAlC,EAA0CF,CAAC,EAA3C,EAA+C;AAC7CD,MAAAA,IAAI,CAACI,IAAL,CAAUV,IAAI,CAACQ,QAAL,CAAcD,CAAd,EAAiBZ,GAA3B;AACD;AACF;;AACDgB,EAAAA,OAAO,CAACC,GAAR,CAAYN,IAAZ;AAED;;AACDD,IAAI;;AAEJ,IAAI;AACF,QAAMQ,GAAG,GAAGrB,EAAE,CAACsB,YAAH,CAAgB,WAAhB,EAA6BrB,MAA7B,CAAZ;AAEAkB,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBC,GAAtB;AACD,CAJD,CAIE,OAAOE,GAAP,EAAY;AACZJ,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBG,GAAxB;AACD","sourcesContent":["const { S3 } = require(\"aws-sdk\");\nconst login_details = require(\"./awslogin.json\")\n\nvar s3 = new S3(login_details);\n// Prefic =\"folderName\" for params\nvar params = {\n  Bucket: 'ashmeet-wedding',\n  Key: 'img1.jpg'\n};\nvar param1 = {\n  Bucket: 'ashmeet-wedding',ContentType: 'image/jpeg'\n}\n\nasync function* listAllKeys(opts) {\n  opts = { ...opts };\n  do {\n    const data = await s3.listObjectsV2(opts).promise();\n    opts.ContinuationToken = data.NextContinuationToken;\n    yield data;\n  } while (opts.ContinuationToken);\n}\n\nlistAllKeys(param1);\n\nasync function main() {\n  // using for of await loop\n  let keys = [];\n  for await (const data of listAllKeys(params)) {\n    for (let i = 0; i < data.Contents.length; i++) {\n      keys.push(data.Contents[i].Key);\n    }\n  }\n  console.log(keys);\n  \n}\nmain();\n\ntry {\n  const url = s3.getSignedUrl('GetObject', params);\n\n  console.log(\"Url : \", url);\n} catch (err) {\n  console.log(\"Error : \", err);\n}"]},"metadata":{},"sourceType":"module"}